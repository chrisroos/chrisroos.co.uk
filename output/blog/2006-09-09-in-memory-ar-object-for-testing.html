<!DOCTYPE html>
<html lang="en">
<head>
  <meta content="HTML Tidy for HTML5 for Apple macOS version 5.6.0" name="generator">
  <meta content="ff511e16d7108be450fccd6f4611cf8d1d5416d1" name="microid">
  <meta content="text/html; charset=utf-8" http-equiv="content-type">
  <link href="/images/favicon.gif" rel="icon">
  <link href="http://feeds.feedburner.com/DeferredUntilInspirationHits" rel="alternate" title="RSS" type="application/rss+xml">
  <link href="/stylesheets/reset.css" media="all" rel="stylesheet" type="text/css">
  <link href="/stylesheets/congobongo.css" media="all" rel="stylesheet" type="text/css">
  <link href="http://www.myopenid.com/server" rel="openid.server">
  <link href="http://chrisroos.myopenid.com/" rel="openid.delegate">
  <title>In memory AR object for testing - Chris Roos</title>
  <link href="/blog/2006-09-09-recommended-web-host" rel="prev">
  <link href="/blog/2006-09-09-changing-irb-context" rel="next">
  <link href="/blog/2005-09-06-linspire" rel="first">
  <link href="/blog/2015-11-20-confusing-git-log-behaviour" rel="last">
  <link href="/blog" rel="index">
</head>
<body>
  <div id="page">
    <div class="group" id="header">
      <p id="site_name"><a href="/">chris roos</a></p>
      <ul class="navigation group">
        <li>
          <a href="/about" title="About me">about me</a>
        </li>
        <li>
          <a href="/contact" title="Contact me">contact me</a>
        </li>
        <li>
          <a href="/blog" title="Blog">blog</a>
        </li>
        <li>
          <a href="/projects" title="Projects">projects</a>
        </li>
        <li>
          <a href="/utilities" title="Utilities">utilities</a>
        </li>
      </ul>
      <form action="http://www.google.co.uk/search" id="searchForm" name="searchForm">
        <div>
          <input name="q" type="hidden" value="site:chrisroos.co.uk"> <input name="q" size="31" type="text"> <input name="sa" type="submit" value="Search">
        </div>
      </form>
    </div>
    <div id="content">
      <abbr class="createdAt" title="2006-09-09T11:03:00+00:00">Sat, 09 Sep 06</abbr>
      <h1>In memory AR object for testing</h1>
      <p>I’ve <a href="/blog/2006-07-12-using-in-memory-active-record-objects-with-associations-for-testing">previously written</a> about using in memory active record objects for testing.</p>
      <p>In doing so recently, I’ve found it necessary to define the id of the in memory object. By default this is obviously nil as it has not been persisted. In addition, it is not possible to set it during normal object construction.</p>
      <pre><code>person = Person.new(:id =&gt; 1)
p person.id
#=&gt; nil</code></pre>
      <p>However, we can give the person constructor a block, setting the id just after creation.</p>
      <pre><code>person = Person.new { |p| p.id = 1 }
p person.id
#=&gt; 1</code></pre>
      <p>Cool.</p>
      <hr>
      <ul class="navigation group">
        <li class="previousPost">« (older) <a class="previousPost" href="/blog/2006-09-09-recommended-web-host" rel="prev" title="Recommended web host">Recommended web host</a>
        </li>
        <li class="nextPost">
          <a class="nextPost" href="/blog/2006-09-09-changing-irb-context" rel="next" title="Changing Irb context">Changing Irb context</a> (newer) »
        </li>
      </ul>
    </div>
    <div id="footer">
      <p class="license"><a href="http://creativecommons.org/licenses/by/2.0/uk/" rel="license"><img alt="Creative Commons Licence" src="https://i.creativecommons.org/l/by/2.0/uk/80x15.png" style="border-width:0"></a><br>
      This work is licensed under a <a href="http://creativecommons.org/licenses/by/2.0/uk/" rel="license">Creative Commons Attribution 2.0 UK: England & Wales License</a> .</p>
    </div>
  </div>
  <script src="/javascripts/google-custom-search.js"></script>
</body>
</html>
