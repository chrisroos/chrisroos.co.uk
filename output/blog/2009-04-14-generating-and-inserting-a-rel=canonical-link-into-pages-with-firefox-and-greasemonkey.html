<!DOCTYPE html>
<html lang="en">
<head>
  <meta content="HTML Tidy for HTML5 for Apple macOS version 5.6.0" name="generator">
  <meta content="ff511e16d7108be450fccd6f4611cf8d1d5416d1" name="microid">
  <meta content="text/html; charset=utf-8" http-equiv="content-type">
  <link href="/images/favicon.gif" rel="icon">
  <link href="http://feeds.feedburner.com/DeferredUntilInspirationHits" rel="alternate" title="RSS" type="application/rss+xml">
  <link href="/stylesheets/reset.css" media="all" rel="stylesheet" type="text/css">
  <link href="/stylesheets/congobongo.css" media="all" rel="stylesheet" type="text/css">
  <link href="http://www.myopenid.com/server" rel="openid.server">
  <link href="http://chrisroos.myopenid.com/" rel="openid.delegate">
  <title>Generating and Inserting a Rel=Canonical Link Into Pages With Firefox and Greasemonkey - Chris Roos</title>
  <link href="/blog/2009-03-31-cruisecontrolrb-with-passenger-and-launchd-on-a-mac" rel="prev">
  <link href="/blog/2009-04-19-rails-2-3-and-the-ability-to-update-created_at-created_on-updated_at-and-updated_on-timestamps" rel="next">
  <link href="/blog/2005-09-06-linspire" rel="first">
  <link href="/blog/2015-11-20-confusing-git-log-behaviour" rel="last">
  <link href="/blog" rel="index">
  <meta content="A greasemonkey script that allows me to generate permalinks for various web pages and insert those permalinks into the page as links with rel=canonical." name="description">
</head>
<body>
  <div id="page">
    <div class="group" id="header">
      <p id="site_name"><a href="/">chris roos</a></p>
      <ul class="navigation group">
        <li>
          <a href="/blog" title="Blog">blog</a>
        </li>
      </ul>
    </div>
    <div id="content">
      <abbr class="createdAt" title="2009-04-14T13:14:00+00:00">Tue, 14 Apr 09</abbr>
      <h1>Generating and Inserting a Rel=Canonical Link Into Pages With Firefox and Greasemonkey</h1>
      <p>I’ve been <a href="/blog/2007-12-14-web-pages-should-specify-their-canonical-url-permalink">thinking about this for over a year</a> but have only recently got around to doing something about it. I’ve also chosen to use <a href="http://googlewebmastercentral.blogspot.com/2009/02/specify-your-canonical.html">rel=canonical</a> rather than rel=bookmark.</p>
      <p>The magic is all in <a href="http://userscripts.org/scripts/show/46797">this</a> <a href="https://addons.mozilla.org/en-US/firefox/addon/748">greasemonkey</a> script. It uses little rule objects to generate the canonical urls for, at the moment, <a href="http://ebay.co.uk">ebay</a>, <a href="http://google.co.uk">google</a> and <a href="http://theyworkforyou.com">theyworkforyou</a> and insert those urls into the page as a link element with rel=canonical. Combining my script with the <a href="http://www.facesaerch.com/widget/showcanonical.user.js">show canonical</a> greasemonkey script (found on the <a href="http://www.tripwolf.com/en/blog/2009/03/17/offtopic-canonical-a-powerful-seo-concept/">tripwolf blog</a>) allows me to easily visit and use the canonical url in emails and the like.</p>
      <p>You should just about be able to see the relatively short canonical url compared to the large url generated by my searching from the firefox search box.</p>
      <p><a href="http://www.flickr.com/photos/chrisjroos/3440988983/"><img alt="" src="http://farm4.static.flickr.com/3627/3440988983_1fe7b0518a_o.jpg"></a></p>
      <p>I hope to expand the set of rules (if you wanted to create one right now I’d suggest looking at the source of the script, the rules are defined towards the end of the script, and the <a href="http://chrisroos.googlecode.com/svn/trunk/scratch/javascript-permalinks/test/rules/">rule tests</a>) and possible have some central repository of rules that the script could use. If you know of some sites that you’d like to see canonical urls for, but don’t want to create the rule, then let me know and I’ll see if I can create it for you.</p>
      <hr>
      <ul class="navigation group">
        <li class="previousPost">« (older) <a class="previousPost" href="/blog/2009-03-31-cruisecontrolrb-with-passenger-and-launchd-on-a-mac" rel="prev" title="CruiseControlrb With Passenger and Launchd on a Mac">CruiseControlrb With Passenger and Launchd on a Mac</a>
        </li>
        <li class="nextPost">
          <a class="nextPost" href="/blog/2009-04-19-rails-2-3-and-the-ability-to-update-created_at-created_on-updated_at-and-updated_on-timestamps" rel="next" title="Rails 2.3 and the ability to update created_at, created_on, updated_at and updated_on timestamps">Rails 2.3 and the ability to update created_at, created_on, updated_at and updated_on timestamps</a> (newer) »
        </li>
      </ul>
    </div>
    <div id="footer">
      <p class="license"><a href="http://creativecommons.org/licenses/by/2.0/uk/" rel="license"><img alt="Creative Commons Licence" src="https://i.creativecommons.org/l/by/2.0/uk/80x15.png" style="border-width:0"></a><br>
      This work is licensed under a <a href="http://creativecommons.org/licenses/by/2.0/uk/" rel="license">Creative Commons Attribution 2.0 UK: England & Wales License</a> .</p>
    </div>
  </div>
</body>
</html>
