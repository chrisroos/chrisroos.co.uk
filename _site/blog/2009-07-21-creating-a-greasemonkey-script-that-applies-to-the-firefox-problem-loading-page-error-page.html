<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <meta name="microid" content="ff511e16d7108be450fccd6f4611cf8d1d5416d1" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta charset="utf-8">
<link rel="icon" href="/images/favicon.gif" />
<link rel="alternate" type="application/rss+xml" title="RSS" href="http://feeds.feedburner.com/DeferredUntilInspirationHits" />
<link rel="stylesheet" href="/stylesheets/reset.css" type="text/css" media="all" />
<link rel="stylesheet" href="/stylesheets/congobongo.css" type="text/css" media="all" />
<link rel="openid.server" href="http://www.myopenid.com/server" />
<link rel="openid.delegate" href="http://chrisroos.myopenid.com/" />
<title>Creating a Greasemonkey Script That Applies to the Firefox 'Problem Loading Page' Error Page - Chris Roos</title>


    
      
        <link rel="prev" href="/blog/2009-06-24-down-for-everyone-or-just-me-greasemonkey-script" />
      
      
        <link rel="next" href="/blog/2009-09-14-pouring-factlets-into-your-brain-holder-via-your-ear-sieves" />
      
      <link rel="first" href="/blog/2005-09-06-linspire" />
      <link rel="last" href="/blog/2015-11-20-confusing-git-log-behaviour" />
      <link rel="index" href="/blog" />
      
        <meta name="description" content="Some notes about applying a greasemonkey script to the Firefox 'Problem Loading Page' error page." />
      
    
  <body>
    <div id="page">
      <div id="header" class="group">
        <p id="site_name">
  <a href="/">chris roos</a>
</p>

        <ul class="navigation group">
  <li>
    <a href="/about" title="About me">about me</a>
  </li>
  <li>
    <a href="/contact" title="Contact me">contact me</a>
  </li>
  <li>
    <a href="/blog" title="Blog">blog</a>
  </li>
  <li>
    <a href="/projects" title="Projects">projects</a>
  </li>
  <li>
    <a href="/utilities" title="Utilities">utilities</a>
  </li>
</ul>

        <form id="searchForm" action="http://www.google.co.uk/search">
  <div>
    <input type="hidden" name="q" value="site:chrisroos.co.uk" />
    <input type="text" name="q" size="31" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>

      </div>
      <div id="content">
        <abbr class="createdAt" title="2009-07-21T07:50:54+01:00">Tue, 21 Jul 09</abbr>
        <h1>Creating a Greasemonkey Script That Applies to the Firefox 'Problem Loading Page' Error Page</h1>
        <p>I found a few things when developing the <a href="/blog/2009-06-24-down-for-everyone-or-just-me-greasemonkey-script">down for
everyone</a>
greasemonkey script that might be of use to someone else wanting to
customise the ‘Problem loading page’ error page.</p>

<p>I originally based my script on this <a href="http://userscripts.org/scripts/show/4125">Server not found? Try and try
again</a> script. Specifically, I
used something like this to determine whether or not the error page was
being displayed.</p>

<p><code>code
  if (document.documentURI.substr(0,14)=="about:neterror") {
</code></p>

<p>Given this I was able to find, and use, this similar code from
&lt;chrome://browser/content/browser.js&gt; (paste that link into the location
bar and search for about:neterror or the aboutNeterror constant).</p>

<p><code>code
  if (/^about:neterror/.test(document.documentURI)) {
</code></p>

<p>I’m still not exactly sure of the purpose of document.documentURI except
that it appears to allow you to display one URI and actually render
another (in this case it displays the URI you’re trying to access but
renders the error page). This error page also appears to screw with
<a href="http://getfirebug.com">firebug</a>. If you want to see the value of
documentURI you’ll need to use this little bit of javascript in the
location bar:</p>

<p><code>code
  javascript:alert(document.documentURI);
</code></p>

<p>It turns out that you can’t directly view the source of the ‘Problem
loading page’ error page: Press Ctrl-U, or select View &gt; Page Source
from the menu, and you’ll be presented with the error page in a popup
window. In order to view the source you’ll need to load it, using the
chrome protocol, from &lt;chrome://global/content/netError.xhtml&gt; (paste
that into the location bar). The error page (which lives in
firefox-dir/chrome/toolkit.jar/content/global/netError.xhtml) is pretty
empty as it uses javascript to read querystring parameters and populate
it on the fly. This allows the same error page to be used for multiple
types of error. You can see an example of changing the description in
this link:
<a href="chrome://global/content/netError.xhtml?e=dnsNotFound&amp;u=http%3A//example.com&amp;d=I%20can%20see%20you...">about:neterror?e=dnsNotFound&amp;u=http%3A//example.com&amp;d=I%20can%20see%20you…</a>
(paste that link into the location bar).</p>

<p>I initially tried to add a button next to the ‘Try Again’ button that
appears on the page. My first attempt was to create a xul:button (which
is the type of the ‘Try Again’ button) but that didn’t work. I don’t
remember the exact details but I don’t think I was able to get
addEventListener working in order to attach events to the button. I was
able to create a standard html button but the xul.css stylesheet didn’t
get applied and it therefore looked odd next to the ‘Try Again’ button.
Comments in the source of the <a href="http://userscripts.org/scripts/review/4125">Server not found? Try and try
again</a> script lead me to
believe that the developer of that script ran into these same problems
with the button.</p>

<p>While digging through the firefox source files I noticed a few files
that I found interesting/amusing and hadn’t come across before:</p>
<about:mozilla>, <about:robots> and <about:crashes> (I’m not sure why
but this link doesn’t appear to work directly, copy and paste it to the
location bar to see the page).
</about:crashes></about:robots></about:mozilla>


        <hr />
        
  <ul class="navigation group">
    
      <li class="previousPost">
        &laquo; (older)
        <a class="previousPost" rel="prev" href="/blog/2009-06-24-down-for-everyone-or-just-me-greasemonkey-script" title="Down for Everyone or Just Me Greasemonkey Script">
          Down for Everyone or Just Me Greasemonkey Script
        </a>
      </li>
    

    
      <li class="nextPost">
        <a class="nextPost" rel="next" href="/blog/2009-09-14-pouring-factlets-into-your-brain-holder-via-your-ear-sieves" title="Pouring Factlets Into Your Brain Holder via Your Ear Sieves">
          Pouring Factlets Into Your Brain Holder via Your Ear Sieves
        </a>
        (newer) &raquo;
      </li>
    
  </ul>


      </div>
      <div id="footer">
        <p class="license">
  <a rel="license" href="http://creativecommons.org/licenses/by/2.0/uk/">
    <img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by/2.0/uk/80x15.png" />
  </a>
  <span xmlns:dc="http://purl.org/dc/elements/1.1/" href="http://purl.org/dc/dcmitype/Text" property="dc:title" rel="dc:type">
    deferred until inspiration hits
  </span>
  by
  <span class="vcard">
    <a xmlns:cc="http://creativecommons.org/ns#" href="/contact" property="cc:attributionName" rel="cc:attributionURL" class="url fn">
      Chris Roos
    </a>
  </span>
  is licensed under a
  <a rel="license" href="http://creativecommons.org/licenses/by/2.0/uk/">
    Creative Commons Attribution 2.0 UK: England &amp; Wales License
  </a>
</p>

      </div>
    </div>
    <script src="/javascripts/google-custom-search.js" type="text/javascript" charset="utf-8"></script>
  </body>
</html>
