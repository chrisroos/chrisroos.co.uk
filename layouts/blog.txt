---
extension: html
filter:    haml
---
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.0//EN" "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd">

%html{:xmlns => "http://www.w3.org/1999/xhtml", "xml:lang" => "en"}

  %head
    = render(:partial => "/html-header")
    
    - if @page.blog_post
      - posts = blog_posts(:all, :reverse => false)
      - post_index = posts.index(@page)
      - if post_index > 0 && previous_post = posts[post_index - 1]
        %link{:rel => "prev", :href => "#{friendly_url(previous_post)}"}
      - if next_post = posts[post_index + 1]
        %link{:rel => "next", :href => "#{friendly_url(next_post)}"}
      %link{:rel => "first", :href => "#{friendly_url(posts.first)}"}
      %link{:rel => "last", :href => "#{friendly_url(posts.last)}"}
      %link{:rel => "index", :href => "/blog"}
      - if @page.summary
        %meta{:name => "description", :content => "#{h(@page.summary)}"}
  
  %body
    #doc3.yui-t7
      #hd.header
        #headerAndSearchContainer
          = render(:partial => "/header")
          = render(:partial => "/google-search")
        = render(:partial => "/navigation")
      #bd
        .yui-g
          %h1
            = short_date(@page) + ' - ' + @page.title
          = @content
          %hr
          = render(:partial => "/blog_post_navigation")
          = render(:partial => "/blog_post_disqus_js")
      #ft
        = render(:partial => "/footer")
    %script{ :src => "/javascripts/google-custom-search.js", :type => "text/javascript", :charset => "utf-8" }